(l=>{l(document).ready(function(){l("#email_notifications").change(function(){l("#email_addresses").prop("disabled",!l(this).is(":checked"))});var s=klaviyo_wp_meta_sync_params.totalUsers;if(console.log(s),0<s){let t=setInterval(()=>{l.ajax({url:klaviyo_wp_meta_sync_params.ajaxUrl,type:"POST",dataType:"json",data:{action:"bulk_sync_progress",bulk_sync_nonce:klaviyo_wp_meta_sync_params.syncNonce},success(s){var e,r,o;console.log(s),s.success?({total_users:s,completed_users:o,failed_users:e,remaining_users:r}=s.data,o=`
								<div style="font-size: 14px; line-height: 1.6; margin-bottom: 10px;">
									<strong style="color: green;">${o.length}</strong> out of <strong>${s}</strong> users synced successfully.<br>
									<strong style="color: red;">${e.length}</strong> users failed.<br>
									<strong style="color: orange;">${r}</strong> users are still in progress.
								</div>
							`,l("#bulk-sync-progress").html(o),r<=0&&(clearInterval(t),s=`
									<div style="margin-top: 10px; font-size: 14px; line-height: 1.6;">
										<strong style="color: green;">All syncs completed successfully!</strong>
										${0<e.length?`<br><strong style="color: red;">${e.length} users failed. Check logs for details.</strong>`:""}
									</div>
								`,l("#bulk-sync-progress").html(o+s))):(console.log("All syncs completed or no users left to process."),clearInterval(t),l("#bulk-sync-progress").html("<strong>All syncs completed or no users left to process.</strong>"))},error(){clearInterval(t),l("#bulk-sync-progress").html("<strong>An error occurred while updating the sync progress. Please refresh the page to check the latest status.</strong>"),console.error("Failed to fetch bulk sync progress.")}})},5e3)}else l("#bulk-sync-progress").html("<strong>No users to scan. Please initiate a new bulk sync.</strong>")})})(jQuery);