(n=>{n(document).ready(function(){n("#email_notifications").change(function(){n("#email_addresses").prop("disabled",!n(this).is(":checked"))});var s=klaviyo_wp_meta_sync_params.totalUsers;if(console.log(s),0<s){let l=setInterval(()=>{n.ajax({url:klaviyo_wp_meta_sync_params.ajaxUrl,type:"POST",dataType:"json",data:{action:"bulk_sync_progress",bulk_sync_nonce:klaviyo_wp_meta_sync_params.syncNonce},success(s){var e,r,o,t;console.log(s),s.success?({total_users:s,completed_users:t,skipped_users:e,failed_users:r,remaining_users:o}=s.data,t=`
								<div style="font-size: 14px; line-height: 1.6; margin-bottom: 10px;">
									<strong style="color: green;">${t.length}</strong> out of <strong>${s}</strong> users synced successfully.<br>
									<strong style="color: yellow;">${e.length}</strong> users skipped - No matching meta keys found.<br>
									<strong style="color: red;">${r.length}</strong> users failed.<br>
									<strong style="color: orange;">${o}</strong> users are still in progress.
								</div>
							`,n("#bulk-sync-progress").html(t),o<=0&&(clearInterval(l),s=`
									<div style="margin-top: 10px; font-size: 14px; line-height: 1.6;">
										<strong style="color: green;">All sync completed successfully!</strong>
										${0<r.length?`<br><strong style="color: red;">${r.length} users failed. Check logs for details.</strong>`:""}
									</div>
								`,n("#bulk-sync-progress").html(t+s))):(console.log("All syncs completed or no users left to process."),clearInterval(l),n("#bulk-sync-progress").html("<strong>All syncs completed or no users left to process.</strong>"))},error(){clearInterval(l),n("#bulk-sync-progress").html("<strong>An error occurred while updating the sync progress. Please refresh the page to check the latest status.</strong>"),console.error("Failed to fetch bulk sync progress.")}})},5e3)}else n("#bulk-sync-progress").html("<strong>No users to scan. Please initiate a new bulk sync.</strong>")})})(jQuery);